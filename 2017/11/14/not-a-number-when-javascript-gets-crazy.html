<!DOCTYPE html>
<html>

<head>
	<script>
		var host = "michelenasti.com";
		if ((host == window.location.host) && (window.location.protocol != "https:"))
			window.location.protocol = "https";
	</script>
	
	<title>Not-A-Number: when javascript gets crazy - Michele Nasti's blog</title>
	<meta name="description" content="Yesterday I was doing some maintenance on a corporate website when I found out that parseInt() returns NaN if the argument is, well, not a number.

" />
	<meta name="keywords" content="" />  
	<meta http-equiv="last-modified" content="2017-11-14 13:20:42 +0100" /> 
	<!--<noscript>-->
	<link rel="stylesheet" href="/css/skel.css" />
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/style-xlarge.css" />
	<link rel="stylesheet" href="/css/colorful.css" />
	<link rel="stylesheet" href="/css/social.css" />
	<link rel="stylesheet" href="/node_modules/animate.css/animate.min.css" />
	<meta name="google-site-verification" content="wpVjnRuXV99CAZxjYBzZgKbJm-8_tdLPrlP43u9zhV0" /> <!-- facebook Open Graph Metadatas -->
<meta content="your_facebook_app_id" property="fb:app_id">
<meta content="" property="og:site_name">


  <meta content="Not-A-Number: when javascript gets crazy" property="og:title">



  <meta content="article" property="og:type">



  <meta content="I'm a full stack Developer with an eye for the web." property="og:description">



  <meta content="https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html" property="og:url">



  <meta content="2017-11-14T01:00:00+01:00" property="article:published_time">
  <meta content="https://www.facebook.com/micnasti/" property="article:author">



<meta content="https://michelenasti.com///images/not-a-number.jpg" property="og:image">



  


<!-- Twitter cards metadatas -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@vdaubry">
<meta name="twitter:creator" content="@micnasti">

  <meta name="twitter:title" content="Not-A-Number: when javascript gets crazy">


  <meta name="twitter:url" content="https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html">



  <meta name="twitter:description" content="I'm a full stack Developer with an eye for the web.">



  <meta name="twitter:image:src" content="https://michelenasti.com//images/not-a-number.jpg">

	<!--</noscript>-->
	<!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88764277-1', 'auto');
  ga('send', 'pageview');

</script>
	<link rel="stylesheet" href="/css/prism.css" />
</head>

<body id="top">

	<header id="header">
	<a href="#" class="image avatar"><img src="/images/michele_nasti.jpg" alt="michele nasti volto" /></a>
	<h1><strong><a href="/">Michele Nasti</a></strong><br /> Full-stack developer <br> with an eye for the web<br>
	</h1>
<a href="/chi-sono-michele-nasti/">Chi sono</a> | 
<a href="/talks-conferences/">Talks &amp; Conferences</a> | 
<a href="/archives/">Archives</a>

</header> <div id="main">
	<article>
		<header class="major">
			<h1 class="post-title"><a href="/2017/11/14/not-a-number-when-javascript-gets-crazy.html">Not-A-Number: when javascript gets crazy</a></h1>
			<p class="post-meta">Nov 14, 2017 â€¢ musikele</p>
		</header>

		<section>

			<p>Yesterday I was doing some maintenance on a corporate website when I found out that <code>parseInt()</code> returns <code>NaN</code> if the argument is, well, not a number.</p>

<p><img src="/images/not-a-number.jpg" alt="" /></p>

<pre><code class="language-javascript">&gt; let pippo = parseInt('a')
NaN
</code></pre>

<p><code>NaN</code> is a constant and stands for <code>Not a Number</code>. Javascript uses this for some very default cases, for example if you divide a number by a string, etc.</p>

<p>Thatâ€™s fair. What comes next is funny :)</p>

<pre><code class="language-javascript">&gt; pippo == NaN
false
&gt; pippo === NaN
false
</code></pre>

<p>Even if a variable is <code>NaN</code>, you cannot check with the usual operators that it is <code>NaN</code>.</p>

<pre><code class="language-javascript">&gt; pippo == pippo
false
&gt; pippo === pippo
false
&gt; NaN == NaN
false
&gt; NaN === NaN
false
</code></pre>

<p>Things start to get crazy. As you can see, <code>NaN</code> is not even equal to itself. You cannot compare anything to <code>NaN</code>, because <code>NaN</code> is not equal to anything.</p>

<h2 id="sooooo-isnan-">soooooâ€¦ isNaN() ?</h2>

<p>There is a function called <code>isNaN()</code> and itâ€™s the only way to detect a <code>NaN</code>.</p>

<pre><code class="language-javascript">&gt; isNaN(pippo)
true
&gt; isNaN(3)
false
&gt; isNaN('bau bau micio micio')
true
</code></pre>

<p>This function seems to resolve our problems: it detects <em>not</em>-numbers, and infact a string is considered <code>NaN</code>.</p>

<pre><code class="language-javascript">&gt; isNaN(undefined)
true
&gt; isNaN(null)
false
</code></pre>

<p>I see your face ðŸ˜† Where is the logic?</p>

<p><code>isNaN</code> tries to convert the argument to a number, using the constructor <code>Number()</code>; if the argument cannot be converted, <code>NaN</code> is returned.</p>

<p>In the case of <code>isNaN(null)</code>, this is what happens:</p>

<pre><code class="language-javascript">isNaN(null) // Number(null) ==&gt; 0 
&gt; false 
</code></pre>

<p>Ha ha, <code>Number(null)</code> returns zero??? Welcome to javascript ðŸ˜Ž This would require a bigger explanation, however JS does a type cohercion trying to compare things. It is described <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-9.3">here</a> (warning: itâ€™s a spec, the first 10 lines are understandable, then itâ€™s a mess).</p>

<p>Of course,</p>

<pre><code class="language-javascript">null == 0
&gt; false
</code></pre>

<p>ðŸ™‚</p>

<p>Just to add the last bit of discoveries around <code>NaN</code>:</p>

<pre><code class="language-javascript">Number(null)
&gt; 0
parseInt(null) 
&gt; NaN
</code></pre>

<h2 id="there-is-another-isnan-around">There is another isNaN() around</h2>

<p>The Javascript <code>Number</code> object also has a <code>isNaN</code> method, that is way more conservative:</p>

<pre><code class="language-javascript">&gt; Number.isNaN(3)
false
&gt; Number.isNaN('3a')
false
&gt; Number.isNaN('abc')
false
&gt; Number.isNaN(undefined)
false
&gt; Number.isNaN(null)
false
&gt; Number.isNaN(NaN)
true
</code></pre>

<p>It will return <code>true</code> only for <code>NaN</code>.</p>

<h2 id="stop-this-its-a-mess">Stop this! Itâ€™s a mess!</h2>

<p>Ok, letâ€™s end with a song:</p>

<pre><code class="language-javascript">console.log(`${10/'a'}a${ 10/'b'}a${ 10/'c'}a${10/'d'}a ${10/'e'}a${10/'f'}a${10/'g'}a${ 10/'h'}a Batman!`)
//NaNaNaNaNaNaNaNa NaNaNaNaNaNaNaNa Batman!
</code></pre>
 
<ul class="share-buttons">
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html) + '&t=' + encodeURIComponent(document.title)); return false;"><img alt="Share on Facebook" src="/images/icons/Facebook.svg"></a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html&text=Not-A-Number: when javascript gets crazy:%20https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html&via=micnasti" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(Not-A-Number: when javascript gets crazy) + ':%20'  + encodeURIComponent(https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html)); return false;"><img alt="Tweet" src="/images/icons/Twitter.svg"></a></li>
  <li><a href="https://plus.google.com/share?url=https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html)); return false;"><img alt="Share on Google+" src="/images/icons/Google+.svg"></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html&title=Not-A-Number: when javascript gets crazy&summary=&source=https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html" target="_blank" title="Share on LinkedIn" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html) + '&title=' +  encodeURIComponent(document.title)); return false;"><img alt="Share on LinkedIn" src="/images/icons/LinkedIn.svg"></a></li>
</ul>

		</section>

		<section>
			 <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    
    var disqus_config = function () {
    	//var disqus_identifier = 'https://michelenasti.com';
			//var disqus_url = '';
			var disqus_url = 'https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html';
			var disqus_identifier = 'https://michelenasti.com/2017/11/14/not-a-number-when-javascript-gets-crazy.html';

    };
    
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//michele-nastis-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
		</section>

		<footer>
			<br> Altri articoli:
			<br>
			<div class="row">
				

				<div class="6u 12u(small) excerpt" id="previousArticle">
					<header>
						<h2><a href="/2017/11/02/gestpay-new-website-is-online.html">Gestpay new website is online!</a></h2>
					</header>
					<section>
						<p>Iâ€™m really excited to write about one of my latest works: <strong>the redesign of Gestpayâ€™s website.</strong></p>

<p><img src="/images/Screenshot-2017-11-6 Gestpay.jpg" alt="" /></p>

<h2 id="what-is-gestpay">What is Gestpay</h2>

<p><a href="https://www.gestpay.it/">Gestpay</a> is the most famous Italian payment processor, owned by Gruppo Banca Sella. It allows websites to accept payments on your ecommerce and your online activities. The main features are:</p>

<ul>
  <li>
    <p><strong>Accept credit cards</strong> from all over the world</p>
  </li>
  <li>
    <p>Integrates with 80+ <strong>alternative payment systems</strong>, like PayPal, Apple Pay, Alipay, Qiwi, Sofort, Klarnaâ€¦ And more!</p>
  </li>
  <li>
    <p>Allows to <strong>customize the payment form</strong></p>
  </li>
  <li>
    <p>multiple layers of <strong>security</strong> (3d secure, Gestpay Guaranteed Paymentâ€¦)</p>
  </li>
  <li>
    <p>It is suitable for <strong>small, medium and giant businesses</strong></p>
  </li>
  <li>
    <p>Still on track after 20 years</p>
  </li>
</ul>

<p>One of my first jobs was to design a <a href="Http://docs.gestpay.it">documentation website</a>, with the goal to be as clear and simple as possible, for developers. We did it!</p>

<p>So, whatâ€™s great about this?</p>

<h2 id="working-with-designers-is-great">Working with designers is great</h2>

<p>This is the first thing that comes to mind. For the first time in my life ever, I had to implement the work of a professional designer. Behind many choices (like, how many pixels here and there) there was a long discussion that could be going. I want to say this in bold: <strong>every frontend developer should work with a designer.</strong></p>

<p>His job started before mine: based on feedbacks received from Facebook contacts, we had a sense of what of the old site was clear and what not.</p>

<p>Then, we performed <strong>usability tests</strong> that confirmed our hypothesis, thus giving us a clear direction on how to setup the navigation.</p>

<p>He realized the layout and thanks to a product called <a href="">invision</a> I could check all the relevant data for me, like colors, spaces, grab the images, etc.</p>

<p><img src="/images/gestpay-invision.PNG" alt="" /></p>

<h2 id="only-small-subset-of-prerequisites">Only small subset of prerequisites</h2>

<p>When we started, it wanted to be a minor redesign of our website. So we decided to approach it lightly.</p>

<ul>
  <li>
    <p><strong>Reuse components</strong> of the previous website, as much as we could</p>
  </li>
  <li>
    <p><strong>Reuse existing css</strong> if possible</p>
  </li>
  <li>
    <p><strong>Internationalization</strong></p>
  </li>
  <li>
    <p><strong>Mobile and tablet friendly</strong></p>
  </li>
</ul>

<p>However, the old website was using a structure doomed with old plugins that were not supported anymore. I decided to rewrite a big part of the website structure from zero, reusing only the SCSS (that was indeed very well organized).</p>

<h2 id="technically-speaking">Technically speakingâ€¦</h2>

<p>Gestpay is made with <a href="https://jekyllrb.com/">Jekyll</a>, a static website generator. It is written in ruby but you donâ€™t have to understand a line of ruby to get it working.</p>

<p>For the styling part we used <a href="http://sass-lang.com/">SCSS</a>, a CSS extension that allows to split styling in many files. This doesnâ€™t solve all styling problems, but by using two guiding principles like <a href="https://www.xfive.co/blog/itcss-scalable-maintainable-css-architecture/">ITCSS </a>and <a href="http://getbem.com/introduction/">BEM</a>, we wrote clearer class names and organized stuff logically.</p>

<p>Combining this with <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Media_Queries/Using_media_queries">responsive classes</a>, like <code>media @screen and (max-width: 650px)</code>, we have developed a website that is also mobile friendly, from the first line of code.</p>

<p>I canâ€™t say how much Flexbox I have used. <a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">Flexbox</a> is so cool I rarely had to use other display properties. Give it a try!</p>

<h3 id="a-word-on-internet-explorer">A word on Internet Explorer</h3>

<p>Internet explorer is still used out there; itâ€™s about 3-7% of the total traffic received on our website. For some complex styling options I had to write some rules for IE only. Edge, on the other side, is great and supports every new standard. We think IE will be less and less important, so this technique (add a discriminant class if the browser is IE) should be future proof.</p>

<p>Stop using IE! It has been deprecated!</p>

<h3 id="a-word-on-safari">A word on Safari</h3>

<p>Developing for mobile (iOS) is impossible if you donâ€™t have an iPhone with you.</p>

<p>For some reasons Safari is not that cool. For example, when you scroll down a page on iPhone the viewport gets bigger, while If you scroll up, weird effects apply. This happens because the button bar hides at the bottom. From a user experience point of view, this is not optimal.</p>

<h2 id="thats-all-folks">Thatâ€™s all folks!</h2>

<p>Now we are checking the stats to see if every user can achieve the promised UX. We are also monitoring new bugs and eventually 404s. We believe to have done a great work in simplifying the user experience; check it out and give us your thoughts!</p>

					</section>
					<div>
						<ul class="actions">
							<li><a href="/2017/11/02/gestpay-new-website-is-online.html" class="button">Read More</a></li>
						</ul>
					</div>
				</div>
				 
			</div>
		</footer>

	</article>

</div>
<script src="/js/infinite-scroll.js"></script>

	<!-- Footer -->
	<footer id="footer">
	<ul class="icons">

		
		<li>
			<a href="https://github.com/musikele" class="icon fa-github">
				<span class="label">GitHub</span>
			</a>
		</li>
		 
		<li>
			<a href="https://twitter.com/micnasti" class="icon fa-twitter">
				<span class="label">Twitter</span>
			</a>
		</li>
		 
		<li>
			<a href="https://linkedin.com/in/michelenasti" class="icon fa-linkedin">
				<span class="label">LinkedIn</span>
			</a>
		</li>
		 
		<li>
			<a href="https://plus.google.com/MicheleNasti" class="icon fa-google-plus">
				<span class="label">Google+</span>
			</a>
		</li>
		 
		<li>
			<a href="https://www.facebook.com/musikele" class="icon fa-facebook">
				<span class="label">Facebook</span>
			</a>
		</li>
		  
	</ul>
	<ul class="copyright">
		<li>&copy; Michele Nasti</li>
		<li>Based on <a href="http://html5up.net/strata">STRATA</a> theme</li>
	</ul>
</footer>
	<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/jquery.poptrox.min.js"></script>
	<script src="/js/skel.min.js"></script>
	<script src="/js/init.js"></script>
	<script src="/js/prism.js"></script>
	
	<!-- <script src="/js/badge.js"></script> -->
</body>

</html>
