<!DOCTYPE html>
<html>

<head>
	<script>
		var host = "michelenasti.com";
		if ((host == window.location.host) && (window.location.protocol != "https:"))
			window.location.protocol = "https";
	</script>
	
	<title>hey javascript function, take this! - Michele Nasti's blog</title>
	<meta name="description" content="In this article I’m going to do a quick recap of ES5 and ES6 functions, explaining what happens to this.

" />
	<meta name="keywords" content="" />  
	<meta http-equiv="last-modified" content="2017-02-15 09:39:32 +0000" /> 
	<!--<noscript>-->
	<link rel="stylesheet" href="/css/skel.css" />
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/style-xlarge.css" />
	<link rel="stylesheet" href="/css/colorful.css" />
	<link rel="stylesheet" href="/css/social.css" />
	<meta name="google-site-verification" content="wpVjnRuXV99CAZxjYBzZgKbJm-8_tdLPrlP43u9zhV0" /> <!-- facebook Open Graph Metadatas -->
<meta content="your_facebook_app_id" property="fb:app_id">
<meta content="" property="og:site_name">

  <meta content="hey javascript function, take this!" property="og:title">


  <meta content="article" property="og:type">


  <meta content="I'm a full stack Developer with an eye for the web." property="og:description">


  <meta content="https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html" property="og:url">


  <meta content="2017-02-10T10:05:22+00:00" property="article:published_time">
  <meta content="https://www.facebook.com/micnasti/" property="article:author">


  <meta content="/img/logo-high-resolution.png" property="og:image">


  


<!-- Twitter cards metadatas -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@vdaubry">
<meta name="twitter:creator" content="@micnasti">

  <meta name="twitter:title" content="hey javascript function, take this!">


  <meta name="twitter:url" content="https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html">


  <meta name="twitter:description" content="I'm a full stack Developer with an eye for the web.">


	<!--</noscript>-->
	<!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88764277-1', 'auto');
  ga('send', 'pageview');

</script>
</head>

<body id="top">

	<header id="header">
	<a href="#" class="image avatar"><img src="/images/michele_nasti.jpg" alt="michele nasti volto" /></a>
	<h1><strong><a href="/">Michele Nasti</a></strong><br /> Full-stack developer <br> with an eye for the web<br>
	</h1>
<a href="/chi-sono-michele-nasti/">Chi sono</a> | 
<a href="/talks-conferences/">Talks &amp; Conferences</a> | 
<a href="/archives/">Archives</a>
</header> <div id="main">
	<article>
		<header class="major">
			<h2 class="post-title"><a href="/2017/02/10/hey-javascript-function-take-this.html">hey javascript function, take this!</a></h2>
			<p class="post-meta">Feb 10, 2017 • musikele</p>
		</header>

		<section>

			<p>In this article I’m going to do a quick recap of ES5 and ES6 functions, explaining what happens to <code class="highlighter-rouge">this</code>.</p>

<p><img src="/images/this.jpg" alt="" />\</p>

<h2 id="functions-as-you-may-already-know-plain-old-classic-es5">Functions as you may already know: plain-old-classic ES5</h2>

<p>As you know, in javascript you can define a function in many ways. The standard, 20-years-old way of declaring a function is this:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">sayHello</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"hello!"</span><span class="p">)</span> 
<span class="p">}</span>
</code></pre>
</div>

<p>This kind of functions will be “hoisted”, this means that the function will be read before any other code, and used when called. So you can also write this with no error:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">// no error: this is executed later</span>
<span class="nx">sayHello</span><span class="p">();</span> 

<span class="c1">//this is read and hoisted first </span>
<span class="kd">function</span> <span class="nx">sayHello</span><span class="p">()</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"hello!"</span><span class="p">)</span> 
<span class="p">}</span>
</code></pre>
</div>

<p>If you find this behaviour too strange (at first glance, it is!), you can <strong>assign a function to a variable</strong>. In this case the function will be read and executed only when used:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="c1">//sayHello();  if called here, like before, ERROR! </span>

<span class="kd">var</span> <span class="nx">sayHello</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Hello!"</span><span class="p">)</span> 
<span class="p">}</span>

<span class="nx">sayHello</span><span class="p">();</span> <span class="c1">// no error because it is used after the definition</span>
</code></pre>
</div>

<h2 id="functions-in-es6">Functions in ES6</h2>

<p>Now we can have a quick look to new kind of functions introduced in ES6. Here is the first example:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">sayHello</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span> 
   <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Hello, "</span> <span class="o">+</span> <span class="nx">name</span><span class="p">);</span>
<span class="p">}</span>

<span class="nx">sayHello</span><span class="p">(</span><span class="s1">'Michele'</span><span class="p">);</span>
</code></pre>
</div>

<p>what happened? we have stripped out the <code class="highlighter-rouge">function</code> keyword, put an arrow (<code class="highlighter-rouge">=&gt;</code>) between the arguments and the body of the function, and that’s it! More expressive and fun to use.</p>

<h2 id="functions-in-es6-in-js-objects">Functions, in ES6, in JS Objects</h2>

<p>There is just one thing to note: <strong>the ES6 version of the function does not bind <code class="highlighter-rouge">this</code></strong>. What the heck does this mean?!</p>

<p>Have a look at this:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">name</span><span class="p">:</span> <span class="s1">'Michele'</span><span class="p">,</span>
  <span class="na">sayHi</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="err">`</span><span class="nx">Hi</span><span class="p">.</span> <span class="nx">I</span><span class="s1">'m ${this.name}`);
  },
  sayHiAlt () {
    console.log(`Hi. I'</span><span class="nx">m</span> <span class="nx">$</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="err">`</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="nx">user</span><span class="p">.</span><span class="nx">sayHi</span><span class="p">();</span> <span class="c1">// "Hi. I'm undefined"</span>
<span class="nx">user</span><span class="p">.</span><span class="nx">sayHiAlt</span><span class="p">();</span> <span class="c1">// "Hi. I'm Michele"</span>
</code></pre>
</div>

<p>What’s happening? Let’s dip in.</p>

<h3 id="what-is-hi-im-thisname">what is <code class="highlighter-rouge">Hi. I'm ${this.name}</code>?</h3>

<p>This is a template string in Javascript. this translates in <code class="highlighter-rouge">"Hi. I\'m " + this.name</code>.</p>

<h3 id="why-the-first-sayhi-returns-undefined">Why the first <code class="highlighter-rouge">sayHi</code> returns undefined?</h3>

<p>because <code class="highlighter-rouge">this</code> is not bound to the context!</p>

<h3 id="what-is-happening-at-the-last-function-sayhialt-">What is happening at the last function, <code class="highlighter-rouge">sayHiAlt</code> ?!</h3>

<p>This is ES6 at all of it’s power. First, we are assigning a function to a variable, like we saw in the third example of this article; then, we are using another ES6 to assign the function to a property with the same name.</p>

<p>Thanks to <a href="https://babeljs.io/repl/">babel online REPL</a> (a place where you can past ES6 code and see it in ES5), the previous snippet becomes this:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">user</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">name</span><span class="p">:</span> <span class="s1">'Michele'</span><span class="p">,</span>
    <span class="na">sayHi</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">sayHi</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Hi. I\'m '</span> <span class="o">+</span> <span class="kc">undefined</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="na">sayHiAlt</span><span class="p">:</span> <span class="kd">function</span> <span class="nx">sayHiAlt</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Hi. I\'m '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre>
</div>

<h2 id="what-should-i-use">What should I use?</h2>

<p>Use <code class="highlighter-rouge">() =&gt; {}</code> always, because it’s simpler; usually you don’t need <code class="highlighter-rouge">this</code> to work.</p>

<p>But if you need <code class="highlighter-rouge">this</code>, … you know what to do.</p>

<p>After writing <code class="highlighter-rouge">this</code> article, I can finally say: ES6 doesn’t care about <code class="highlighter-rouge">this</code>, but you should.</p>
 
<ul class="share-buttons">
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html) + '&t=' + encodeURIComponent(document.title)); return false;"><img alt="Share on Facebook" src="/images/icons/Facebook.svg"></a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html&text=hey javascript function, take this!:%20https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html&via=micnasti" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(hey javascript function, take this!) + ':%20'  + encodeURIComponent(https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html)); return false;"><img alt="Tweet" src="/images/icons/Twitter.svg"></a></li>
  <li><a href="https://plus.google.com/share?url=https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html)); return false;"><img alt="Share on Google+" src="/images/icons/Google+.svg"></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html&title=hey javascript function, take this!&summary=&source=https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html" target="_blank" title="Share on LinkedIn" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html) + '&title=' +  encodeURIComponent(document.title)); return false;"><img alt="Share on LinkedIn" src="/images/icons/LinkedIn.svg"></a></li>
</ul>

		</section>

		<section>
			 <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    
    var disqus_config = function () {
    	//var disqus_identifier = 'https://michelenasti.com';
			//var disqus_url = '';
			var disqus_url = 'https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html';
			var disqus_identifier = 'https://michelenasti.com/2017/02/10/hey-javascript-function-take-this.html';

    };
    
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//michele-nastis-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
		</section>

		<footer>
			<br> Altri articoli:
			<br>
			<div class="row">
				

				<article class="6u 12u(small) excerpt">
					<header>
						<h2><a href="/2017/02/08/debug-a-nodejs-application-from-command-line-it-s-super-easy.html">Debug a NodeJS application from command line - it's super easy!</a></h2>
					</header>
					<section>
						<p>If you want to seriously develop a nodejs application, you can’t continue to put <code class="highlighter-rouge">console.log()</code> statements everywhere. It’s just a pain! That’s why every modern language has debug support via various tools.</p>


					</section>
					<footer>
						<ul class="actions">
							<li><a href="/2017/02/08/debug-a-nodejs-application-from-command-line-it-s-super-easy.html" class="button">Read More</a></li>
						</ul>
					</footer>
				</article>
				 

				<article class="6u$ 12u(small) excerpt f-right">
					<header>
						<h2><a href="/libri-motivazionali/">I libri motivazionali funzionano?</a></h2>
					</header>
					<section>
						<p>In una discussione con alcuni miei amici abbiamo iniziato a parlare di libri che stavamo leggendo in questo periodo, e ne è nato un discorso sui libri <em>motivazionali</em> (quei libri che ti insegnano a essere una persona migliore).</p>


					</section>
					<footer>
						<ul class="actions">
							<li><a href="//libri-motivazionali/" class="button">Read More</a></li>
						</ul>
					</footer>
				</article>
				
			</div>
		</footer>

	</article>

</div>

	<!-- Footer -->
	<footer id="footer">
	<ul class="icons">

		
		<li>
			<a href="https://github.com/musikele" class="icon fa-github">
				<span class="label">GitHub</span>
			</a>
		</li>
		 
		<li>
			<a href="https://twitter.com/micnasti" class="icon fa-twitter">
				<span class="label">Twitter</span>
			</a>
		</li>
		 
		<li>
			<a href="https://linkedin.com/in/michelenasti" class="icon fa-linkedin">
				<span class="label">LinkedIn</span>
			</a>
		</li>
		 
		<li>
			<a href="https://plus.google.com/MicheleNasti" class="icon fa-google-plus">
				<span class="label">Google+</span>
			</a>
		</li>
		 
		<li>
			<a href="https://www.facebook.com/musikele" class="icon fa-facebook">
				<span class="label">Facebook</span>
			</a>
		</li>
		  
	</ul>
	<ul class="copyright">
		<li>&copy; Michele Nasti</li>
		<li>Based on <a href="http://html5up.net/strata">STRATA</a> theme</li>
	</ul>
</footer>
	<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/jquery.poptrox.min.js"></script>
	<script src="/js/skel.min.js"></script>
	<script src="/js/init.js"></script>
</body>

</html>