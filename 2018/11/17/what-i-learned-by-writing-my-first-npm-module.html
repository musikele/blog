<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<script>
		var host = "michelenasti.com";
		if ((host == window.location.host) && (window.location.protocol != "https:"))
			window.location.protocol = "https";
	</script>
	
	<title>What I learned by writing my first npm module - Michele Nasti's blog</title>
	 
	<meta name="keywords" content="javascript, nodejs" />  
	<meta http-equiv="last-modified" content="2018-11-19 10:23:28 +0100" /> 
	<!--<noscript>-->
	<link rel="stylesheet" href="/css/skel.css" />
	<link rel="stylesheet" href="/css/style.css" />
	<link rel="stylesheet" href="/css/style-xlarge.css" />
	<link rel="stylesheet" href="/css/colorful.css" />
	<link rel="stylesheet" href="/css/social.css" />
	<link rel="stylesheet" href="/node_modules/animate.css/animate.min.css" />
	<meta name="google-site-verification" content="wpVjnRuXV99CAZxjYBzZgKbJm-8_tdLPrlP43u9zhV0" /> <!-- facebook Open Graph Metadatas -->
<meta content="your_facebook_app_id" property="fb:app_id">
<meta content="" property="og:site_name">


  <meta content="What I learned by writing my first npm module" property="og:title">



  <meta content="article" property="og:type">



  <meta content="I wrote a little browser npm utility just for fun, but the process from code to npm is not so straightforward. Let's have a look at all my mistakes and discoveries. " property="og:description">



  <meta content="https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html" property="og:url">



  <meta content="2018-11-17T00:00:00+01:00" property="article:published_time">
  <meta content="https://www.facebook.com/micnasti/" property="article:author">



<meta content="https://michelenasti.com///images/index.png" property="og:image">



  
  <meta content="javascript" property="article:tag">
  
  <meta content="nodejs" property="article:tag">
  


<!-- Twitter cards metadatas -->
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@vdaubry">
<meta name="twitter:creator" content="@micnasti">

  <meta name="twitter:title" content="What I learned by writing my first npm module">


  <meta name="twitter:url" content="https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html">



  <meta name="twitter:description" content="I wrote a little browser npm utility just for fun, but the process from code to npm is not so straightforward. Let's have a look at all my mistakes and discoveries. ">



  <meta name="twitter:image:src" content="https://michelenasti.com//images/index.png">

	<!--</noscript>-->
	<!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-88764277-1', 'auto');
  ga('send', 'pageview');

</script>
	<link rel="stylesheet" href="/css/prism.css" />
	
	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-9588917209740632",
        enable_page_level_ads: true
    });
</script>
</head>

<body id="top">

	<header id="header">
	<a href="#" class="image avatar"><img src="/images/michele_nasti.jpg" alt="michele nasti volto" /></a>
	<h1><strong><a href="/">Michele Nasti</a></strong><br /> Full-stack developer <br> with an eye for the web<br>
	</h1>
<a href="/chi-sono-michele-nasti/">Chi sono</a> | 
<a href="/talks-conferences/">Talks &amp; Conferences</a> | 
<a href="/archives/">Archives</a>

</header> <div id="main">
	<article>
		<header class="major">
			<h1 class="post-title"><a href="/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html">What I learned by writing my first npm module</a></h1>
			<p class="post-meta">Nov 17, 2018 • musikele</p>
		</header>

		<section>
			
			<p>Last weekend I wrote a simple module that converts a Javascript array in a HTML table. It’s called <a href="https://www.npmjs.com/package/html-table-builder" title="HTML Table Builder">Html Table Builder</a>.</p>

<p>It is an exercise from the book <a href="https://eloquentjavascript.net">Eloquent Javascript</a>; also, there are other gazillion modules on NPM that do the same thing with very similar names (a sign that the book is used a lot by javascript learners).</p>

<h2 id="a-little-description">A little description</h2>

<p>The library exposes a js function that accepts a js array and returns a HTML <code>&lt;table&gt;</code> object (not string!), so you can attach to the document with <code>document.appendChild(element)</code>. Checkout the <a href="https://github.com/musikele/html-table-builder">documentation on github</a>.</p>

<p>My idea was to release a library that was:</p>

<ul>
  <li><strong>fully tested</strong></li>
  <li>developed with <strong>Test Driven Development</strong></li>
  <li><strong>isomorphic</strong> (by using <a href="https://www.npmjs.com/package/jsdom">JSDOM</a> on node)</li>
  <li>built by <strong>webpack</strong></li>
  <li>accepts objects with <strong>custom columns</strong></li>
</ul>

<p>Many more features have to come:</p>

<ul>
  <li>apart from the fact that the input must be an array, I don’t want to force users to pass array of objects. So you can pass an array containing strings, numbers, etc. even heterogeneous objects, the function will render it somehow.</li>
  <li>I want to generate tables-in-tables, if the object in input is an array containing other arrays. This is tricky to do, I’ll have to handle colspans and more.. but not impossible.</li>
  <li>I also have to add css classes to columns (so you can style your tables)</li>
  <li>…and add a showcase page. Who’s gonna use your library if nobody understand how to use it?</li>
</ul>

<h2 id="i-lost-a-lot-of-time-with">I lost a lot of time with…</h2>

<ul>
  <li>
    <p><strong>Webpack</strong> - diving inside the webpack configuration to get the library minimized and bundled should be an easy task, BUT our friends in webpack have added thousands of options to configure every single bit.<br />
In the end this is <a href="https://github.com/musikele/html-table-builder/blob/master/webpack.config.js">the configuration that works for me</a>:</p>

    <pre><code class="language-javascript">// webpack.config.js
module.exports = {
  entry: './index.js',
  target: 'web', 
  output: {
    filename: 'html-table-builder.js',
    library: 'HtmlTableBuilder',
    libraryTarget: 'umd'
  },
  mode: 'production',
  devtool: 'source-map',
  externals: {
    jsdom: 'JSDOM'
  }
};
  
</code></pre>

    <p>The relevant bits to expose the library are in the <code>output</code> property; read the <a href="https://webpack.js.org/configuration/output/#output-library">documentation</a> for it.</p>
  </li>
  <li><strong>NPM</strong> - I used npm (tool) to upload my pckage to NPM (site). NPM had some security issues lately, somebody hacked maintainers accounts and released dangerous code in popular libraries. That’s why they reset all user passwords and implemented 2FA authentication, that is a good thing. It even works from console. 
But the main trouble was naming the library. It is a table generator, and you really can’t imagine <a href="https://www.npmjs.com/search?q=json%20to%20table">how many there are</a>. Trying to be self-explicative, without sacrificing the “ideal good name”, took me to choose a <code>html-table-builder</code>. I would have loved to call it <code>super-table</code> or <code>table-generator</code>, but guess what? Already taken. Sad.</li>
  <li><strong>Javascript</strong> - I have a story to tell about JS and dynamic typing. I was writing the function that <a href="https://github.com/musikele/html-table-builder/blob/master/get-columns/index.js">extracts the name of the columns</a>, and in the first version it returned an array of strings. <br />
Then I decided to return an array of object and DANG! errors everywhere, fortunately tracked down by unit tests. <br />
Then I decided to change again and make it return an object instead of an array, and again only TDD could help me to track down errors. <br />
In the end … <strong>static types could have helped to catch errors without TDD</strong> and I could have used TDD-time to develop more complex tests.</li>
</ul>

<h2 id="what-did-not-give-problems">What did not give problems</h2>

<ul>
  <li><strong>Jest</strong>. Testing with Jest has been <em>extremely easy</em>. It was my first experience with Jest (coming from Mocha) but I have never had to checkout the documentation for anything. Good!</li>
  <li><strong>ESLint, Prettier</strong> and <strong>VSCode</strong> - These tools resolve stupid issues for you. Just install and forget about them.  They’ll add semicolumns, fix tabs or spaces, return syntactic errors live… A good bonus.</li>
</ul>

<h2 id="finally">Finally</h2>

<p>It is a very simple library, but it is already downloaded by 64 users (small number, but <em>great!</em> If you’re a user, pass by and let me know your problems).</p>

<p>I learned a lot of stuff by writing this library; <strong>It took me some 8hrs to work it out</strong>. But it was fun.</p>

<blockquote>
  <p>You remember 5% of what you read, 10% of what you write, 90% of what you do again.</p>
</blockquote>

<p>Exactly what I thought while I was preparing the first release!</p>
 
			
			
<ul class="share-buttons">
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html&t=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html) + '&t=' + encodeURIComponent(document.title)); return false;"><img alt="Share on Facebook" src="/images/icons/Facebook.svg"></a></li>
  <li><a href="https://twitter.com/intent/tweet?source=https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html&text=What I learned by writing my first npm module:%20https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html&via=micnasti" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(What I learned by writing my first npm module) + ':%20'  + encodeURIComponent(https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html)); return false;"><img alt="Tweet" src="/images/icons/Twitter.svg"></a></li>
  <li><a href="https://plus.google.com/share?url=https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html" target="_blank" title="Share on Google+" onclick="window.open('https://plus.google.com/share?url=' + encodeURIComponent(https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html)); return false;"><img alt="Share on Google+" src="/images/icons/Google+.svg"></a></li>
  <li><a href="http://www.linkedin.com/shareArticle?mini=true&url=https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html&title=What I learned by writing my first npm module&summary=&source=https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html" target="_blank" title="Share on LinkedIn" onclick="window.open('http://www.linkedin.com/shareArticle?mini=true&url=' + encodeURIComponent(https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html) + '&title=' +  encodeURIComponent(document.title)); return false;"><img alt="Share on LinkedIn" src="/images/icons/LinkedIn.svg"></a></li>
</ul>

			<h4>Related Posts:</h4>
<div class="articles-row">







    
    

    

    



    
    

    

    



    
    

    

    



    
    

    

    



    
    

    

    
        <div class="col-4">
        <h5><a href="/2018/11/05/inspiring-tech-people-to-follow-nicholas-c-zakas.html">Inspiring tech people to follow: Nicholas C. Zakas <span class="label label-default">javascript</span> </a></h5>
        </div>
        
         
    



    
    

    

    
        <div class="col-4">
        <h5><a href="/2018/10/29/the-easiest-way-to-understand-javascript-generators.html">The easiest way to understand Javascript Generators <span class="label label-default">javascript</span>  <span class="label label-default">nodejs</span> </a></h5>
        </div>
        
         
    



    
    

    

    



    
    

    

    
        <div class="col-4">
        <h5><a href="/2018/10/22/perch%C3%A9-ci-sono-persone-che-conoscono-jquery-ma-non-conoscono-javascript.html">Perché ci sono persone che conoscono jQuery ma non conoscono JavaScript? <span class="label label-default">javascript</span> </a></h5>
        </div>
        
         
    



    
    

    

    
        <div class="col-4">
        <h5><a href="/2018/10/15/dovrei-imparare-ruby-on-rails-o-nodejs.html">Dovrei imparare Ruby on Rails o NodeJS ?  <span class="label label-default">nodejs</span> </a></h5>
        </div>
        
        
            



    


</div>

		</section>

		<section>
			 <div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    
    var disqus_config = function () {
    	//var disqus_identifier = 'https://michelenasti.com';
			//var disqus_url = '';
			var disqus_url = 'https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html';
			var disqus_identifier = 'https://michelenasti.com/2018/11/17/what-i-learned-by-writing-my-first-npm-module.html';

    };
    
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//michele-nastis-blog.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript> 
		</section>

		<footer>			
			<div>
    

    <div class="6u 12u(small) excerpt" id="previousArticle">
        <header>
            <h2><a href="/2018/11/05/inspiring-tech-people-to-follow-nicholas-c-zakas.html">Inspiring tech people to follow: Nicholas C. Zakas</a></h2>
        </header>
        <section>
            <p>Usually in the software engineering world we talk about programming languages, tools and code. Let’s start a different path with my blog and talk about people behind it!</p>


        </section>
        <div>
            <ul class="actions">
                <li><a href="/2018/11/05/inspiring-tech-people-to-follow-nicholas-c-zakas.html" class="button">Read More</a></li>
            </ul>
        </div>
    </div>
     

    <div class="6u$ 12u(small) excerpt f-right" id="nextArticle">
        <header>
            <h2><a href="/2018/12/12/remembering-the-bad-bad-days-of-browser-wars.html">10 years around the web platform, what's changed and what's not</a></h2>
        </header>
        <section>
            <p><strong>In 2006 I was studying web technologies at University</strong>. Avilable browsers were Firefox, Opera, Internet Explorer, Netscape on some linux computers.</p>


        </section>
        <div>
            <ul class="actions">
                <li><a href="//2018/12/12/remembering-the-bad-bad-days-of-browser-wars.html" class="button">Read More</a></li>
            </ul>
        </div>
    </div>
    
</div>
		</footer>

	</article>

</div>
<script src="/js/infinite-scroll.js"></script>

	<!-- Footer -->
	<footer id="footer">
	<ul class="icons">

		
		<li>
			<a href="https://github.com/musikele" class="icon fa-github">
				<span class="label">GitHub</span>
			</a>
		</li>
		 
		<li>
			<a href="https://twitter.com/micnasti" class="icon fa-twitter">
				<span class="label">Twitter</span>
			</a>
		</li>
		 
		<li>
			<a href="https://linkedin.com/in/michelenasti" class="icon fa-linkedin">
				<span class="label">LinkedIn</span>
			</a>
		</li>
		 
		<li>
			<a href="https://plus.google.com/+MicheleNasti" class="icon fa-google-plus">
				<span class="label">Google+</span>
			</a>
		</li>
		 
		<li>
			<a href="https://www.facebook.com/musikele" class="icon fa-facebook">
				<span class="label">Facebook</span>
			</a>
		</li>
		  
	</ul>
	<ul class="copyright">
		<li>&copy; Michele Nasti</li>
		<li>Based on <a href="http://html5up.net/strata">STRATA</a> theme</li>
	</ul>
</footer>
	<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
	<script src="/js/jquery.min.js"></script>
	<script src="/js/jquery.poptrox.min.js"></script>
	<script src="/js/skel.min.js"></script>
	<script src="/js/init.js"></script>
	<script src="/js/prism.js"></script>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#000"
    },
    "button": {
      "background": "#f1d600"
    }
  },
  "position": "bottom-left",
  "content": {
    "href": "//www.iubenda.com/privacy-policy/84379975"
  }
})});
</script>
	<!-- <script src="/js/badge.js"></script> -->
</body>

</html>
